import{watchImmediate as m}from"@vueuse/core";import{isRef as s,toValue as r,inject as f,computed as l,ref as p}from"vue";import{useSiteLocaleData as _,withBase as g,usePageFrontmatter as S}from"vuepress/client";import{Watermark as d}from"watermark-js-plus";import{isPlainObject as k,isFunction as v}from"@vuepress/helper/client";const h=(e,t)=>{if(__VUEPRESS_SSR__)return;const n=_(),a=new d,c=()=>{if(r(t)){const o={content:n.value.title,fontColor:"#76747f",globalAlpha:r(e).mode==="blind"?.005:.165,...r(e)};o.image?.startsWith("/")&&(o.image=g(o.image)),a.changeOptions(o)}else a.destroy()};m([t,s(e)?e:null],c,{flush:"post"})},u=Symbol(__VUEPRESS_DEV__?"watermark":""),i=p({}),W=e=>{s(e)?m(e,t=>{i.value=t}):v(e)?m(l(e),t=>{i.value=t}):i.value=e},w=e=>{const t=f(u),n=S();return l(()=>{const{watermark:a}=n.value;return{...r(e),...t.value,...k(a)?a:{}}})},E=e=>{e.provide(u,i)};export{W as defineWatermarkConfig,E as injectWatermarkConfig,h as setupWatermark,w as useWatermarkOptions};
//# sourceMappingURL=index.js.map
